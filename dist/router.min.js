!function(a,b,c){var d,e,f,g;!function(){var a={},b={};d=function(b,c,d){a[b]={deps:c,callback:d}},g=f=e=function(c){function d(a){if("."!==a.charAt(0))return a;for(var b=a.split("/"),d=c.split("/").slice(0,-1),e=0,f=b.length;f>e;e++){var g=b[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(b[c])return b[c];if(b[c]={},!a[c])throw new Error("Could not find module "+c);for(var f,g=a[c],h=g.deps,i=g.callback,j=[],k=0,l=h.length;l>k;k++)"exports"===h[k]?j.push(f={}):j.push(e(d(h[k])));var m=i.apply(this,j);return b[c]=f||m}}(),d("router/handler-info",["./utils","rsvp","exports"],function(a,b,c){"use strict";function d(a){a&&j(this,a)}function e(a){d.call(this,a)}function f(a){d.call(this,a),this.params=this.params||{}}function g(a){d.call(this,a)}function h(a,b){if(!a^!b)return!1;if(!a)return!0;for(var c in a)if(a.hasOwnProperty(c)&&a[c]!==b[c])return!1;return!0}var i=a.bind,j=a.merge,k=a.oCreate,l=a.serialize,m=b.resolve;d.prototype={name:null,handler:null,params:null,context:null,log:function(a,b){a.log&&a.log(this.name+": "+b)},resolve:function(a,b,c){var d=i(this.checkForAbort,this,b),e=i(this.runBeforeModelHook,this,a,c),f=i(this.getModel,this,a,c),g=i(this.runAfterModelHook,this,a,c),h=i(this.becomeResolved,this,c);return m().then(d).then(e).then(d).then(f).then(d).then(g).then(d).then(h)},runBeforeModelHook:function(a,b){return b.trigger&&b.trigger(!0,"willResolveModel",b,this.handler),this.runSharedModelHook(a,b,"beforeModel",[])},runAfterModelHook:function(a,b,c){var d=this.name;return this.stashResolvedModel(b,c),this.runSharedModelHook(a,b,"afterModel",[c]).then(function(){return b.resolvedModels[d]})},runSharedModelHook:function(a,b,c,d){this.log(b,"calling "+c+" hook"),this.queryParams&&d.push(this.queryParams),d.push(b);var e=this.handler;return a(function(){return e[c]&&e[c].apply(e,d)})},getModel:function(){throw new Error("This should be overridden by a subclass of HandlerInfo")},checkForAbort:function(a,b){return m(a()).then(function(){return b})},stashResolvedModel:function(a,b){a.resolvedModels=a.resolvedModels||{},a.resolvedModels[this.name]=b},becomeResolved:function(a,b){var c=this.params||l(this.handler,b,this.names);return a&&(this.stashResolvedModel(a,b),a.params=a.params||{},a.params[this.name]=c),new e({context:b,name:this.name,handler:this.handler,params:c})},shouldSupercede:function(a){if(!a)return!0;var b=a.context===this.context;return a.name!==this.name||this.hasOwnProperty("context")&&!b||this.hasOwnProperty("params")&&!h(this.params,a.params)}},e.prototype=k(d.prototype),e.prototype.resolve=function(){return m(this)},f.prototype=k(d.prototype),f.prototype.getModel=function(a,b){return this.runSharedModelHook(a,b,"model",[this.params])},g.prototype=k(d.prototype),g.prototype.getModel=function(a,b){return this.log(b,this.name+": resolving provided model"),m(this.context)},c.HandlerInfo=d,c.ResolvedHandlerInfo=e,c.UnresolvedHandlerInfoByParam=f,c.UnresolvedHandlerInfoByObject=g}),d("router/router",["route-recognizer","rsvp","./utils","./transition-state","./transition","./transition-intent/named-transition-intent","./transition-intent/url-transition-intent","exports"],function(a,b,c,d,e,f,g,h){"use strict";function i(){this.recognizer=new o,this.reset()}function j(a,b,c){var d=l(a.state,b);v(d.exited,function(a){var b=a.handler;delete b.context,b.exit&&b.exit()}),a.state=b;var e=a.currentHandlerInfos=d.unchanged.slice();v(d.updatedContext,function(a){return k(e,a,!1,c)}),v(d.entered,function(a){return k(e,a,!0,c)})}function k(a,b,c,d){var e=b.handler,f=b.context;return c&&e.enter&&e.enter(),d&&!d()?!1:(e.context=f,e.contextDidChange&&e.contextDidChange(),e.setup&&e.setup(f,b.queryParams),d&&!d()?!1:(a.push(b),!0))}function l(a,b){var c,d,e,f,g,h=a.handlerInfos,i=b.handlerInfos,j={updatedContext:[],exited:[],entered:[],unchanged:[]};for(f=0,g=i.length;g>f;f++){var k=h[f],l=i[f];k&&k.handler===l.handler||(c=!0),c?(j.entered.push(l),k&&j.exited.unshift(k)):d||k.context!==l.context||e?(d=!0,j.updatedContext.push(l)):j.unchanged.push(k)}for(f=i.length,g=h.length;g>f;f++)j.exited.unshift(h[f]);return j}function m(a,b){t(a.router,a.sequence,"Resolved all models on destination route; finalizing transition.");var c,d=a.router,e=b.handlerInfos,f=(a.sequence,e[e.length-1].name),g={},h=a.urlMethod;for(c=e.length-1;c>=0;--c){var i=e[c];w(g,i.params),i.handler.inaccessibleByURL&&(h=null)}if(h){var k=d.recognizer.generate(f,g);"replace"===h?d.replaceURL(k):d.updateURL(k)}return j(d,b,function(){return!a.isAborted}),a.isAborted?(d.state.handlerInfos=d.currentHandlerInfos,p(A(a))):(a.isActive=!1,d.activeTransition=null,s(d,d.currentHandlerInfos,!0,["didTransition"]),d.didTransition&&d.didTransition(d.currentHandlerInfos),t(d,a.sequence,"TRANSITION COMPLETE."),e[e.length-1].handler)}function n(a,b,c){var d,e=b[0]||"/";if(1===b.length&&b[0].hasOwnProperty("queryParams"))throw new Error("not implemented");return"/"===e.charAt(0)?(t(a,"Attempting URL transition to "+e),d=new D({url:e})):(t(a,"Attempting transition to "+e),d=new C({name:b[0],contexts:u.call(b,1)})),a.transitionByIntent(d,c)}var o=a["default"],p=b.reject,q=b.async,r=b.Promise,s=c.trigger,t=c.log,u=c.slice,v=c.forEach,w=c.merge,x=c.serialize,y=c.extractQueryParams,z=d.TransitionState,A=e.logAbort,B=e.Transition,C=f.NamedTransitionIntent,D=g.URLTransitionIntent;i.prototype={map:function(a){this.recognizer.delegate=this.delegate,this.recognizer.map(a,function(a,b){var c=b[b.length-1].handler,d=[b,{as:c}];a.add.apply(a,d)})},hasRoute:function(a){return this.recognizer.hasRoute(a)},transitionByIntent:function(a,b){var c=this.activeTransition?this.activeTransition.state:this.state;try{var d=a.applyToState(c,this.recognizer,this.getHandler,b);if(d===c)return new B(this);if(b)return j(this,d),void 0;var e=new B(this,a,d),f=!1;this.activeTransition&&(f=!0,this.activeTransition.abort()),this.activeTransition=e;var g=this;return e.promise=e.promise.then(function(a){return g.async(function(){return m(e,a.state)})}),f||s(this,this.state.handlerInfos,!0,["willTransition",e]),e}catch(h){return new B(this,a,null,h)}},reset:function(){this.state&&v(this.state.handlerInfos,function(a){var b=a.handler;b.exit&&b.exit()}),this.state=new z,this.currentHandlerInfos=null},activeTransition:null,handleURL:function(a){var b=u.call(arguments);return"/"!==a.charAt(0)&&(b[0]="/"+a),n(this,b).method(null)},updateURL:function(){throw new Error("updateURL is not implemented")},replaceURL:function(a){this.updateURL(a)},transitionTo:function(){return n(this,arguments)},intermediateTransitionTo:function(){n(this,arguments,!0)},replaceWith:function(){return n(this,arguments).method("replace")},generate:function(a){for(var b=y(u.call(arguments,1)),c=b[0],d=(b[1],new C({name:a,contexts:c})),e=d.applyToState(this.state,this.recognizer,this.getHandler),f={},g=0,h=e.handlerInfos.length;h>g;++g){var i=e.handlerInfos[g],j=i.params||x(i.handler,i.context,i.names);w(f,j)}return this.recognizer.generate(a,f)},isActive:function(a){var b,c,d=y(u.call(arguments,1)),e=d[0],f=(d[1],this.state.handlerInfos);if(!f.length)return!1;var g=f[f.length-1].name,h=this.recognizer.handlersFor(g),i=0;for(c=h.length;c>i&&(b=f[i],b.name!==a);++i);if(i===h.length)return!1;var j=new z;j.handlerInfos=f.slice(0,i+1),h=h.slice(0,i+1);var k=new C({name:g,contexts:e}),l=k.applyToHandlers(j,h,this.getHandler,g,!0,!0);return l===j},trigger:function(){var a=u.call(arguments);s(this,this.currentHandlerInfos,!1,a)},async:function(a){return new r(function(b){q(function(){b(a())})})},log:null},h.Router=i}),d("router/transition-intent",["./utils","exports"],function(a,b){"use strict";function c(a){a&&d(this,a),this.data=this.data||{}}var d=a.merge;c.prototype.applyToState=function(a){return a},b.TransitionIntent=c}),d("router/transition-intent/named-transition-intent",["../transition-intent","../transition-state","../handler-info","../utils","exports"],function(a,b,c,d,e){"use strict";function f(a){g.call(this,a)}var g=a.TransitionIntent,h=b.TransitionState,i=c.UnresolvedHandlerInfoByParam,j=c.UnresolvedHandlerInfoByObject,k=d.isParam,l=d.forEach,m=d.extractQueryParams,n=d.oCreate;f.prototype=n(g.prototype),f.prototype.applyToState=function(a,b,c,d){var e=m([this.name].concat(this.contexts)),f=e[0],g=(e[1],b.handlersFor(f[0])),h=g[g.length-1].handler;return this.applyToHandlers(a,g,c,h,d)},f.prototype.applyToHandlers=function(a,b,c,d,e,f){for(var g=new h,i=this.contexts.slice(0),j=b.length,k=[],l=b.length-1;l>=0;--l){var m=b[l],n=m.handler,o=c(n),p=a.handlerInfos[l],q=null;if(m.names.length>0?q=this.getHandlerInfoForDynamicSegment(n,o,m.names,i,p,d):(q=this.createParamHandlerInfo(n,o,m.names,i,p),k.unshift(l)),f){q=q.becomeResolved(null,q.context);var r=p&&p.context;m.names.length>0&&q.context===r&&(q.params=p&&p.params),q.context=r}var s=p;q.shouldSupercede(p)&&(j=l,s=q),e&&!f&&(s=s.becomeResolved(null,s.context)),g.handlerInfos.unshift(s)}if(i.length>0)throw new Error("More context objects were passed than there are dynamic segments for the route: "+d);return e||this.invalidateNonDynamicHandlers(g.handlerInfos,k,j),j<b.length?g:a},f.prototype.invalidateNonDynamicHandlers=function(a,b,c){l(b,function(b){if(b>=c){var d=a[b];a[b]=new i({name:d.name,handler:d.handler,params:{}})}})},f.prototype.getHandlerInfoForDynamicSegment=function(a,b,c,d,e,f){{var g;c.length}if(!(d.length>0)){if(e&&e.name===a)return e;throw new Error("Not enough context objects were provided to complete a transition to "+f+". Specifically, the "+a+" route needs an object that can be serialized into its dynamic URL segments ["+c.join(", ")+"]")}return g=d[d.length-1],k(g)?this.createParamHandlerInfo(a,b,c,d,e):(d.pop(),new j({name:a,handler:b,context:g,names:c}))},f.prototype.createParamHandlerInfo=function(a,b,c,d,e){for(var f={},g=c.length;g--;){var h=e&&a===e.name&&e.params||{},j=d[d.length-1],l=c[g];if(k(j))f[l]=""+d.pop();else{if(!h.hasOwnProperty(l))throw new Error("You didn't provide enough string/numeric parameters to satisfy all of the dynamic segments for route "+a);f[l]=h[l]}}return new i({name:a,handler:b,params:f})},e.NamedTransitionIntent=f}),d("router/transition-intent/url-transition-intent",["../transition-intent","../transition-state","../handler-info","../utils","exports"],function(a,b,c,d,e){"use strict";function f(a){h.call(this,a)}function g(a){this.message=a||"UnrecognizedURLError",this.name="UnrecognizedURLError"}var h=a.TransitionIntent,i=b.TransitionState,j=c.UnresolvedHandlerInfoByParam,k=d.oCreate;f.prototype=k(h.prototype),f.prototype.applyToState=function(a,b,c){var d,e,f=new i,h=b.recognize(this.url);if(!h)throw new g(this.url);var k=!1;for(d=0,e=h.length;e>d;++d){var l=h[d],m=l.handler,n=c(m);if(n.inaccessibleByURL)throw new g(this.url);var o=new j({name:m,handler:n,params:l.params}),p=a.handlerInfos[d];k||o.shouldSupercede(p)?(k=!0,f.handlerInfos[d]=o):f.handlerInfos[d]=p}return k?f:a},e.URLTransitionIntent=f}),d("router/transition-state",["rsvp","exports"],function(a,b){"use strict";function c(){this.handlerInfos=[]}var d=a.resolve;c.prototype={resolve:function(a,b,c){function e(){return d(b()).fail(function(a){throw j=!0,a})}function f(a){throw{error:a,handlerWithError:i.handlerInfos[c.resolveIndex].handler,wasAborted:j,state:i}}function g(a){i.handlerInfos[c.resolveIndex++]=a;var b=a.handler;return b&&b.redirect&&b.redirect(a.context,c),e().then(h)}function h(){if(c.resolveIndex===i.handlerInfos.length)return{error:null,state:i};var b=i.handlerInfos[c.resolveIndex];return b.resolve(a,e,c).then(g)}c=c||{},c.resolveIndex=0;var i=this,j=!1;return d().then(h).fail(f)}},b.TransitionState=c}),d("router/transition",["rsvp","./handler-info","./utils","exports"],function(a,b,c,d){"use strict";function e(a,b,c,d){function g(){return k.isAborted?h():void 0}var k=this;if(this.state=c||a.state,this.intent=b,this.router=a,this.data=this.intent&&this.intent.data||{},this.resolvedModels={},this.params={},d)return this.promise=h(d),void 0;if(c){var l=c.handlerInfos.length;l&&(this.targetName=c.handlerInfos[c.handlerInfos.length-1].name);for(var m=0;l>m;++m){var n=c.handlerInfos[m];if(!(n instanceof j))break;this.pivotHandler=n.handler}this.sequence=e.currentSequence++,this.promise=c.resolve(a.async,g,this).fail(function(a){throw a.wasAborted?f(k):(k.trigger("error",a.error,k,a.handlerWithError),k.abort(),a.error)})}else this.promise=i(this.state)}function f(a){return m(a.router,a.sequence,"detected abort."),new g}function g(a){this.message=a||"TransitionAborted",this.name="TransitionAborted"}var h=a.reject,i=a.resolve,j=b.ResolvedHandlerInfo,k=c.trigger,l=c.slice,m=c.log;e.currentSequence=0,e.prototype={targetName:null,urlMethod:"update",intent:null,params:null,pivotHandler:null,resolveIndex:0,handlerInfos:null,resolvedModels:null,isActive:!0,state:null,promise:null,data:null,then:function(a,b){return this.promise.then(a,b)},abort:function(){return this.isAborted?this:(m(this.router,this.sequence,this.targetName+": transition was aborted"),this.isAborted=!0,this.isActive=!1,this.router.activeTransition=null,this)},retry:function(){return this.abort(),this.router.transitionByIntent(this.intent,!1)},method:function(a){return this.urlMethod=a,this},trigger:function(a){var b=l.call(arguments);"boolean"==typeof a?b.shift():a=!1,k(this.router,this.state.handlerInfos.slice(0,this.resolveIndex+1),a,b)},followRedirects:function(){var a=this.router;return this.promise.fail(function(b){if(a.activeTransition)return a.activeTransition.followRedirects();throw b})},toString:function(){return"Transition (sequence "+this.sequence+")"},log:function(a){m(this.router,this.sequence,a)}},e.prototype.send=e.prototype.trigger,d.Transition=e,d.logAbort=f}),d("router/utils",["exports"],function(a){"use strict";function b(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function c(a){var b,c,d=a&&a.length;return d&&d>0&&a[d-1]&&a[d-1].hasOwnProperty("queryParams")?(c=a[d-1].queryParams,b=j.call(a,0,d-1),[b,c]):[a,null]}function d(a,b,c){a.log&&(3===arguments.length?a.log("Transition #"+b+": "+c):(c=b,a.log(c)))}function e(a,b){var c=arguments;return function(d){var e=j.call(c,2);return e.push(d),a.apply(b,e)}}function f(a){return"string"==typeof a||a instanceof String||"number"==typeof a||a instanceof Number}function g(a,b){for(var c=0,d=a.length;d>c&&!1!==b(a[c]);c++);}function h(a,b,c){var d={};if(f(b))return d[c[0]]=b,d;if(a.serialize)return a.serialize(b,c);if(1===c.length){var e=c[0];return d[e]=/_id$/.test(e)?b.id:b,d}}function i(a,b,c,d){if(a.triggerEvent)return a.triggerEvent(b,c,d),void 0;var e=d.shift();if(!b){if(c)return;throw new Error("Could not trigger event '"+e+"'. There are no active handlers")}for(var f=!1,g=b.length-1;g>=0;g--){var h=b[g],i=h.handler;if(i.events&&i.events[e]){if(i.events[e].apply(i,d)!==!0)return;f=!0}}if(!f&&!c)throw new Error("Nothing handled the event '"+e+"'.")}var j=Array.prototype.slice,k=Object.create||function(a){function b(){}return b.prototype=a,new b};a.trigger=i,a.log=d,a.oCreate=k,a.merge=b,a.extractQueryParams=c,a.bind=e,a.isParam=f,a.forEach=g,a.slice=j,a.serialize=h}),d("router",["./router/router","exports"],function(a,b){"use strict";var c=a.Router;b.Router=c}),d("route-recognizer",[],function(){return c}),d("rsvp",[],function(){return b}),window.Router=e("router")}(window,window.RSVP,window.RouteRecognizer);